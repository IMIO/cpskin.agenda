<div class="event-entry"
  tal:define="portal_type context/portal_type;
              useViewTypes context/portal_properties/site_properties/typesUseViewActionInListings;
              useView python:portal_type in useViewTypes;
              scale request/scale;">
  <a tal:define="
      description context/Description|string:;
      title context/pretty_title_or_id|string:;
      url context/absolute_url|string:#;
      view_url python:(url and useView and url + '/view') or url;"
     tal:attributes="href view_url;
                     title description">

    <div class="pageleadImage"
         style=""
         tal:define="scaled_image_url string:$url/@@images/image/${scale}"
         tal:attributes="style string:background-image: url(${scaled_image_url})">
    </div>

    <div class="pagecaption">

     <h3 tal:content="title"></h3>

    </div>

    <span class="documentByLine"
          tal:define="folderview context/@@folderview_view">
      <tal:one_day condition="python: folderview.is_one_day(context)">
      <span i18n:translate="evenement_le">le</span>
      <span tal:content="python: folderview.toLocalizedTime(context.start, long_format=0, event=context)" />
        <tal:withHours condition="python: folderview.is_with_hours(context)">
          <tal:openEnd condition="python: folderview.is_open_end(context)">
            <span i18n:translate="evenement_a_lheure">à</span>
            <span tal:content="python: folderview.toLocalizedTime(context.start, long_format=1, event=context)[11:]" />
          </tal:openEnd>
          <tal:fixedEnd condition="python: not folderview.is_open_end(context)">
            <span i18n:translate="evenement_de">de</span>
            <span tal:content="python: folderview.toLocalizedTime(context.start, long_format=1, event=context)[11:]" />
            <span i18n:translate="evenement_a">à</span>
            <span tal:content="python: folderview.toLocalizedTime(context.end, long_format=1, event=context, startend='end')[11:]" />
          </tal:fixedEnd>
        </tal:withHours>
      </tal:one_day>
      <tal:more_days condition="python: not folderview.is_one_day(context)">
        <span i18n:translate="evenement_du">du</span>
        <span tal:content="python: folderview.toLocalizedTime(context.start, long_format=0, event=context)" />
        <span i18n:translate="evenement_au">au</span>
        <span tal:content="python: folderview.toLocalizedTime(context.end, long_format=0, event=context, startend='end')" />
      </tal:more_days>
    </span>

  </a>
</div>
